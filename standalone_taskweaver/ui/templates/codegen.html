<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codegen Integration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            background-color: #333;
            color: white;
            padding: 20px;
            text-align: center;
        }
        .section {
            background-color: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input[type="text"], textarea, select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .status {
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
        }
        .success {
            background-color: #dff0d8;
            color: #3c763d;
        }
        .error {
            background-color: #f2dede;
            color: #a94442;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background-color: #ddd;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
        }
        .tab.active {
            background-color: white;
            border-bottom: 2px solid #4CAF50;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        pre {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            overflow-x: auto;
        }
        .code-editor {
            font-family: monospace;
            min-height: 300px;
            white-space: pre;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Codegen Integration</h1>
    </div>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="code-generation">Code Generation</div>
            <div class="tab" data-tab="code-analysis">Code Analysis</div>
            <div class="tab" data-tab="code-refactoring">Code Refactoring</div>
            <div class="tab" data-tab="test-generation">Test Generation</div>
        </div>
        
        <div class="tab-content active" id="code-generation">
            <div class="section">
                <h2>Generate Code</h2>
                <div class="form-group">
                    <label for="code-prompt">Prompt:</label>
                    <textarea id="code-prompt" rows="5" placeholder="Enter prompt for code generation"></textarea>
                </div>
                <div class="form-group">
                    <label for="code-language">Language:</label>
                    <select id="code-language">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="typescript">TypeScript</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                        <option value="cpp">C++</option>
                        <option value="go">Go</option>
                        <option value="rust">Rust</option>
                    </select>
                </div>
                <button id="generate-code-btn">Generate Code</button>
                <div id="generate-code-status" class="status"></div>
                <div class="form-group">
                    <label for="generated-code">Generated Code:</label>
                    <pre id="generated-code" class="code-editor"></pre>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="code-analysis">
            <div class="section">
                <h2>Analyze Code</h2>
                <div class="form-group">
                    <label for="analyze-code">Code to Analyze:</label>
                    <textarea id="analyze-code" rows="10" placeholder="Enter code to analyze"></textarea>
                </div>
                <div class="form-group">
                    <label for="analyze-language">Language:</label>
                    <select id="analyze-language">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="typescript">TypeScript</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                        <option value="cpp">C++</option>
                        <option value="go">Go</option>
                        <option value="rust">Rust</option>
                    </select>
                </div>
                <button id="analyze-code-btn">Analyze Code</button>
                <div id="analyze-code-status" class="status"></div>
                <div class="form-group">
                    <label for="analysis-result">Analysis Result:</label>
                    <pre id="analysis-result"></pre>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="code-refactoring">
            <div class="section">
                <h2>Refactor Code</h2>
                <div class="form-group">
                    <label for="refactor-code">Code to Refactor:</label>
                    <textarea id="refactor-code" rows="10" placeholder="Enter code to refactor"></textarea>
                </div>
                <div class="form-group">
                    <label for="refactor-language">Language:</label>
                    <select id="refactor-language">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="typescript">TypeScript</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                        <option value="cpp">C++</option>
                        <option value="go">Go</option>
                        <option value="rust">Rust</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="refactor-instructions">Refactoring Instructions:</label>
                    <textarea id="refactor-instructions" rows="5" placeholder="Enter refactoring instructions"></textarea>
                </div>
                <button id="refactor-code-btn">Refactor Code</button>
                <div id="refactor-code-status" class="status"></div>
                <div class="form-group">
                    <label for="refactored-code">Refactored Code:</label>
                    <pre id="refactored-code" class="code-editor"></pre>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="test-generation">
            <div class="section">
                <h2>Generate Tests</h2>
                <div class="form-group">
                    <label for="test-code">Code to Generate Tests For:</label>
                    <textarea id="test-code" rows="10" placeholder="Enter code to generate tests for"></textarea>
                </div>
                <div class="form-group">
                    <label for="test-language">Language:</label>
                    <select id="test-language">
                        <option value="python">Python</option>
                        <option value="javascript">JavaScript</option>
                        <option value="typescript">TypeScript</option>
                        <option value="java">Java</option>
                        <option value="csharp">C#</option>
                        <option value="cpp">C++</option>
                        <option value="go">Go</option>
                        <option value="rust">Rust</option>
                    </select>
                </div>
                <button id="generate-tests-btn">Generate Tests</button>
                <div id="generate-tests-status" class="status"></div>
                <div class="form-group">
                    <label for="generated-tests">Generated Tests:</label>
                    <pre id="generated-tests" class="code-editor"></pre>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Tab switching
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                
                tab.classList.add('active');
                document.getElementById(tab.getAttribute('data-tab')).classList.add('active');
            });
        });
        
        // Generate code
        document.getElementById('generate-code-btn').addEventListener('click', async () => {
            const prompt = document.getElementById('code-prompt').value;
            const language = document.getElementById('code-language').value;
            
            if (!prompt) {
                document.getElementById('generate-code-status').textContent = 'Please enter a prompt';
                document.getElementById('generate-code-status').className = 'status error';
                return;
            }
            
            try {
                document.getElementById('generate-code-status').textContent = 'Generating code...';
                document.getElementById('generate-code-status').className = 'status';
                
                const response = await fetch('/api/codegen/generate-code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        prompt: prompt,
                        language: language
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('generate-code-status').textContent = 'Code generated successfully';
                    document.getElementById('generate-code-status').className = 'status success';
                    document.getElementById('generated-code').textContent = data.code || '';
                } else {
                    document.getElementById('generate-code-status').textContent = 'Failed to generate code: ' + (data.error || 'Unknown error');
                    document.getElementById('generate-code-status').className = 'status error';
                }
            } catch (error) {
                document.getElementById('generate-code-status').textContent = 'Error: ' + error.message;
                document.getElementById('generate-code-status').className = 'status error';
            }
        });
        
        // Analyze code
        document.getElementById('analyze-code-btn').addEventListener('click', async () => {
            const code = document.getElementById('analyze-code').value;
            const language = document.getElementById('analyze-language').value;
            
            if (!code) {
                document.getElementById('analyze-code-status').textContent = 'Please enter code to analyze';
                document.getElementById('analyze-code-status').className = 'status error';
                return;
            }
            
            try {
                document.getElementById('analyze-code-status').textContent = 'Analyzing code...';
                document.getElementById('analyze-code-status').className = 'status';
                
                const response = await fetch('/api/codegen/analyze-code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        language: language
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('analyze-code-status').textContent = 'Code analyzed successfully';
                    document.getElementById('analyze-code-status').className = 'status success';
                    document.getElementById('analysis-result').textContent = data.analysis || '';
                } else {
                    document.getElementById('analyze-code-status').textContent = 'Failed to analyze code: ' + (data.error || 'Unknown error');
                    document.getElementById('analyze-code-status').className = 'status error';
                }
            } catch (error) {
                document.getElementById('analyze-code-status').textContent = 'Error: ' + error.message;
                document.getElementById('analyze-code-status').className = 'status error';
            }
        });
        
        // Refactor code
        document.getElementById('refactor-code-btn').addEventListener('click', async () => {
            const code = document.getElementById('refactor-code').value;
            const language = document.getElementById('refactor-language').value;
            const instructions = document.getElementById('refactor-instructions').value;
            
            if (!code || !instructions) {
                document.getElementById('refactor-code-status').textContent = 'Please enter code and instructions';
                document.getElementById('refactor-code-status').className = 'status error';
                return;
            }
            
            try {
                document.getElementById('refactor-code-status').textContent = 'Refactoring code...';
                document.getElementById('refactor-code-status').className = 'status';
                
                const response = await fetch('/api/codegen/refactor-code', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        language: language,
                        instructions: instructions
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('refactor-code-status').textContent = 'Code refactored successfully';
                    document.getElementById('refactor-code-status').className = 'status success';
                    document.getElementById('refactored-code').textContent = data.refactored_code || '';
                } else {
                    document.getElementById('refactor-code-status').textContent = 'Failed to refactor code: ' + (data.error || 'Unknown error');
                    document.getElementById('refactor-code-status').className = 'status error';
                }
            } catch (error) {
                document.getElementById('refactor-code-status').textContent = 'Error: ' + error.message;
                document.getElementById('refactor-code-status').className = 'status error';
            }
        });
        
        // Generate tests
        document.getElementById('generate-tests-btn').addEventListener('click', async () => {
            const code = document.getElementById('test-code').value;
            const language = document.getElementById('test-language').value;
            
            if (!code) {
                document.getElementById('generate-tests-status').textContent = 'Please enter code to generate tests for';
                document.getElementById('generate-tests-status').className = 'status error';
                return;
            }
            
            try {
                document.getElementById('generate-tests-status').textContent = 'Generating tests...';
                document.getElementById('generate-tests-status').className = 'status';
                
                const response = await fetch('/api/codegen/generate-tests', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        code: code,
                        language: language
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    document.getElementById('generate-tests-status').textContent = 'Tests generated successfully';
                    document.getElementById('generate-tests-status').className = 'status success';
                    document.getElementById('generated-tests').textContent = data.tests || '';
                } else {
                    document.getElementById('generate-tests-status').textContent = 'Failed to generate tests: ' + (data.error || 'Unknown error');
                    document.getElementById('generate-tests-status').className = 'status error';
                }
            } catch (error) {
                document.getElementById('generate-tests-status').textContent = 'Error: ' + error.message;
                document.getElementById('generate-tests-status').className = 'status error';
            }
        });
    </script>
</body>
</html>

