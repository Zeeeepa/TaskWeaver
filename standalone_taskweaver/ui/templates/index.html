<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskWeaver - A Code-First Agent Framework</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/">TaskWeaver</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="/">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/codegen">Codegen</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Welcome to TaskWeaver</h5>
                    </div>
                    <div class="card-body">
                        <p>TaskWeaver is a code-first agent framework for seamlessly planning and executing data analytics tasks with Codegen integration.</p>
                        <p>To get started, set up your API credentials below:</p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- OpenAI API Settings Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>OpenAI API Settings</h5>
                    </div>
                    <div class="card-body">
                        <form id="openai-settings-form">
                            <div class="mb-3">
                                <label for="openai-api-key" class="form-label">OpenAI API Key</label>
                                <input type="password" class="form-control" id="openai-api-key" name="openai_api_key" placeholder="Enter your OpenAI API key">
                            </div>
                            <div class="mb-3">
                                <label for="openai-api-base" class="form-label">OpenAI API Base URL (optional)</label>
                                <input type="text" class="form-control" id="openai-api-base" name="openai_api_base" placeholder="Enter your OpenAI API base URL (default: https://api.openai.com/v1)">
                            </div>
                            <div class="mb-3">
                                <label for="openai-model" class="form-label">OpenAI Model (optional)</label>
                                <input type="text" class="form-control" id="openai-model" name="openai_model" placeholder="Enter your preferred OpenAI model (default: gpt-4)">
                            </div>
                            <button type="submit" class="btn btn-primary">Save OpenAI Settings</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- API Credentials Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>API Credentials</h5>
                    </div>
                    <div class="card-body">
                        <form id="credentials-form">
                            <div class="mb-3">
                                <label for="github-token" class="form-label">GitHub Token</label>
                                <input type="password" class="form-control" id="github-token" name="github_token" placeholder="Enter your GitHub token">
                            </div>
                            <div class="mb-3">
                                <label for="codegen-token" class="form-label">Codegen Token</label>
                                <input type="password" class="form-control" id="codegen-token" name="codegen_token" placeholder="Enter your Codegen token">
                            </div>
                            <div class="mb-3">
                                <label for="ngrok-token" class="form-label">ngrok Token (optional)</label>
                                <input type="password" class="form-control" id="ngrok-token" name="ngrok_token" placeholder="Enter your ngrok token">
                            </div>
                            <div class="mb-3">
                                <label for="codegen-org-id" class="form-label">Codegen Organization ID</label>
                                <input type="text" class="form-control" id="codegen-org-id" name="codegen_org_id" placeholder="Enter your Codegen organization ID">
                            </div>
                            <button type="submit" class="btn btn-primary">Set Credentials</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Repository Selection Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Repository Selection</h5>
                    </div>
                    <div class="card-body">
                        <div id="repo-selection-container">
                            <p>Please set your API credentials first to see available repositories.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chat Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Chat with TaskWeaver</h5>
                    </div>
                    <div class="card-body">
                        <div id="chat-container" class="chat-container mb-3">
                            <div class="system-message">Welcome to TaskWeaver! How can I help you today?</div>
                        </div>
                        <form id="chat-form">
                            <div class="input-group">
                                <input type="text" class="form-control" id="chat-input" placeholder="Type your message...">
                                <button class="btn btn-primary" type="submit">Send</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Status Section -->
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h5>Status</h5>
                    </div>
                    <div class="card-body">
                        <div id="status-container">
                            <p>Ready to start. Please set up API credentials and select a repository.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="/static/script.js"></script>
</body>
</html>
